{% extends "base.html" %}

{% block content %}

<h2 class="mb-4">Latest Products</h2>

<div class="row">
    {% for product in products %}
    <div class="col-md-4 col-lg-3">
        <div class="card shadow-sm mb-4">

            {% if product.image_url %}
                <img src="{{ product.image_url }}"
                     class="card-img-top"
                     style="height:200px; object-fit:cover;">
            {% endif %}

            <div class="card-body text-center">
                <h5>{{ product.name }}</h5>
                <p class="text-muted">{{ product.description }}</p>
                <h6 class="text-success">â‚¹{{ product.price }}</h6>

                <button class="btn btn-success w-100 mt-2"
                        onclick="addToCart({{ product.id }})">
                    Add to Cart
                </button>
            </div>

        </div>
    </div>
    {% endfor %}
</div>

<script>
function addToCart(productId) {
    fetch("/add_to_cart", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ product_id: productId })
    })
    .then(res => res.json())
    .then(data => alert(data.message || data.error));
}
</script>

{% endblock %}